{{ define "head" }}
  {{ with .Params.img }}
    <meta property="og:image" content="{{ . | absURL }}" />
    <meta name="twitter:image" content="{{ . | absURL }}" />
  {{ end }}
{{ end }}

{{ define "title" }}
  {{ .Title }} | {{ .Site.Title }}
{{ end }}

{{ define "header" }}
  <h1>{{ .Title }}</h1>
  <a href="/">Portfolio</a>
  {{ if isset .Params "img" }}
    <img src="{{ .Params.img }}" />
  {{ end }}
  {{ partial "breadcrumbs.html" . }}
  <nav>
    {{ with .Params.categories }}
      Category
      <ul>
        {{ range . }}
          <a href="/categories/{{ . }}/"><li>{{ . }}</li></a>
        {{ end }}
      </ul>
    {{ end }}
    {{ with .Params.tags }}
      Tag
      <ul>
        {{ range . }}
          <a href="/tags/{{ . }}/"><li>{{ . }}</li></a>
          {{ end }}
      </ul>
    {{ end }}
  </nav>
  <time>公開：{{ .Date.Format "2006/01/02" }}</time>
  {{ if isset .Params "Lastmod" }}
    <time>更新：{{ .Lastmod.Format "2006/01/02" }}</time>
  {{ end }}
{{ end }}

{{ define "main" }}
    {{ .Content }}

    <h3>Share</h3>
    <ul>
      <a href="//www.facebook.com/sharer/sharer.php?u={{ .Permalink | safeJS }}" target="_blank"><li>Facebookで共有</li></a>
      <a href="//twitter.com/intent/tweet?text={{ .Title | safeJS }}%20%7C%20{{ .Site.Title }}%20{{ .Permalink | safeJS }}%20%40{{ .Site.Params.twitter }}" target="_blank"><li>Twitterで共有</li></a>
      <a href="//b.hatena.ne.jp/entry/{{ .Permalink | safeJS }}" target="_blank"><li>はてなブックマークで共有</li></a>
      <a href="//line.me/R/msg/text/?{{ .Permalink | safeJS }}" target="_blank"><li>LINEで共有</li></a>
      <a href="//cloud.feedly.com/#subscription/feed/{{ .Permalink | safeJS }}" target="_blank"><li>Feedlyで共有</li></a>
      <a href="//getpocket.com/edit?url={{ .Permalink | safeJS }}" target="_blank"><li>Pocketで共有</li></a>
      <a href="mailto:?subject={{ .Title }}&amp;body={{ .Permalink | safeURL }}" target="_blank"><li>メールで共有</li></a>
    </ul>
    <img src="//chart.apis.google.com/chart?cht=qr&chs=150x150&chof=gif&chl={{ .Permalink | safeJS }}" />
    {{ $related := .Site.RegularPages.Related . | first 10 }}
    {{ with $related }}
    <article>
      <h3>Related Content　<a href="/blog">more</a></h3>
      <ul>
      	{{ range . }}
      	<li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
      	{{ end }}
      </ul>
      {{ end }}
      <h3>Latest Contents　<a href="/blog">more</a></h3>
      <ul>
        {{ range first 5 (where .Data.Pages "Type" "blog") }}
          <li>
            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            <time>{{ .Date.Format "2006/01/02" }}</time>
          </li>
        {{ end }}
      </ul>
      <nav>
        {{ if (or .PrevInSection .NextInSection) }}
        <ul>
            {{ if .PrevInSection }}
              <li>
                <a rel="prev" href="{{ .PrevInSection.RelPermalink }}">
                  « Previous<br />{{ .PrevInSection.Title }}
                </a>
              </li>
            {{ end }}
            {{ if .NextInSection }}
              <li>
                <a  rel="next" href="{{ .NextInSection.RelPermalink }}">
                  Next »<br />{{ .NextInSection.Title }}
                </a>
              </li>
            {{ end }}
        </ul>
        {{ end }}
      </nav>
    </article>
    <script src="//cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script>
    <script>
      Barba.Pjax.Dom.wrapperId = 'load';
      Barba.Pjax.Dom.containerClass = 'load';
      Barba.Pjax.start();
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('sw.js');
        });
      }
    </script>
{{ end }}
