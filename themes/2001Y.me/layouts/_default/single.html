{{ define "head" }}
  <meta name="description" content="{{ .Description }}" >
  <meta itemprop="image" content="https://2001y.me/img/{{ .Params.img }}-700.jpeg">

  <meta property="og:title" content="{{ .Title }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:description" content="{{ .Description }}">
  <meta property="og:image" content="https://2001y.me/img/{{ .Params.img }}-700.jpeg">
  <meta property="og:url" content="https:{{ $.Permalink }}">
  <meta property="og:type" content="article">

  <meta property="fb:app_id" content="app">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Y20010920T">

  <base target="_blank">
{{ end }}

{{ define "title" }}
  {{ .Title }} | {{ .Site.Title }}
{{ end }}

{{ define "style" }}
  {{ readFile "/themes/2001Y.me/static/style/single.css" | safeCSS }}
{{ end }}

{{ define "header" }}
  {{ if .PrevInSection }}
    <a rel="prev" href="{{ .PrevInSection.RelPermalink }}" id="prev-post"></a>
  {{ end }}
  {{ if .NextInSection }}
    <a rel="next" href="{{ .NextInSection.RelPermalink }}" id="next-post"></a>
  {{ end }}
  <h1 itemprop="name" id="title" {{ if .PrevInSection }}data-prev-post="{{ .PrevInSection.Title }}"{{ end }} {{ if .NextInSection }}data-next-post="{{ .NextInSection.Title }}"{{ end }}>{{ .Title }}</h1>
  <span id="description">{{ .Description }}</span>
  <div id="post-meta">
    <time itemprop="datePublished" datetime='{{ .Date.Format "2006-01-02" }}'>{{ .Date.Format "2006/01/02" }}</time>
      {{ with .Params.categories }}
      <ul>
        {{ range . }}
        <a href="/categories/{{ . }}/" id="{{ . }}"><li>{{ . }}</li></a>
        {{ end }}
      </ul>
      {{ end }}
      {{ with .Params.tags }}
      <ul>
        {{ range . }}
        <a href="/tags/{{ . }}/"><li>{{ . }}</li></a>
        {{ end }}
      </ul>
      {{ end }}
  </div>

<style>
  header:after {
    background: linear-gradient(30deg, rgb(161, 229, 226), rgb(161, 198, 229));
    z-index: -2;
  }
  header:before {
    background: linear-gradient(30deg, rgba(161, 229, 226, .7), rgba(161, 198, 229, .7)),url('/img/{{ .Params.img }}-700.jpeg') no-repeat center/cover;
    z-index: -1;
    animation: fadeIn 1.5s ease 0s 1 normal;
  }
  h2 {
    color: var(--dim);
    font-size: 3rem;
    margin: 3rem 0 2rem;
    position: relative;
    padding-left: 4rem;
    font-weight: 700;
  }
  h2::before,h2::after {
    content: "";
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 2rem 1.2rem 0 1.2rem;
    position:absolute;
  }
  h2::before {
    border-color: var(--light) transparent transparent transparent;
    top: 1.5rem;
    left: 0rem;
  }
  h2::after {
    border-color: var(--dim) transparent transparent transparent;
    top: 1rem;
    left: 1rem;
  }
</style>
{{ end }}

{{ define "main" }}
<main id="{{ with .Params.categories }}{{ range . }}{{ . }}{{ end }}{{ end }}">
{{ partial "breadcrumbs.html" . }}

<section id="main-section" itemprop="articleBody">
  {{ if isset .Params "img" }}
  <picture deta-original="/img/{{ .Params.img }}" deta-alt="{{ .Params.img }}" id="thumbnail">
    <source type="image/webp" srcset="/img/{{ .Params.img }}-100.webp" data-srcset="/img/{{ .Params.img }}-700.webp" />
    <img class="lazyestload" src="/img/{{ .Params.img }}-100.jpeg" data-src="/img/{{ .Params.img }}-700.jpeg" alt="{{ .Params.img }}" />
  </picture>
  {{ end }}
  {{ .Content }}
  <aside>
    <h3>Share</h3>
    <ul id="share-box">
      <a href="//www.facebook.com/sharer/sharer.php?u={{ .Permalink | safeJS }}" target="_blank"><li>Facebook</li></a>
      <a href="//twitter.com/intent/tweet?text={{ .Title | safeJS }}%20%7C%20{{ .Site.Title }}%20{{ .Permalink | safeJS }}%20%40{{ .Site.Params.twitter }}" target="_blank"><li>Twitterで共有</li></a>
      <a href="//b.hatena.ne.jp/entry/{{ .Permalink | safeJS }}" target="_blank"><li>はてなブックマーク</li></a>
      <a href="//line.me/R/msg/text/?{{ .Permalink | safeJS }}" target="_blank"><li>LINE</li></a>
      <a href="//cloud.feedly.com/#subscription/feed/{{ .Permalink | safeJS }}" target="_blank"><li>Feedly</li></a>
      <a href="//getpocket.com/edit?url={{ .Permalink | safeJS }}" target="_blank"><li>Pocker</li></a>
      <a href="mailto:?subject={{ .Title }}&amp;body={{ .Permalink | safeURL }}" target="_blank"><li>メール</li></a>
    </ul>

    {{ $related := .Site.RegularPages.Related . | first 10 }}
    {{ with $related }}
    <h3>Related Content　<a href="/blog">more</a></h3>
    <ul>
      {{ range . }}
      <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
      {{ end }}
    </ul>
    {{ end }}
    <h3>Latest Contents　<a href="/blog">more</a></h3>
    <ul>
      {{ range first 5 (where .Data.Pages "Type" "blog") }}
      <a href="{{ .RelPermalink }}">
        <li>
          {{ .Title }}
          <time>{{ .Date.Format "2006/01/02" }}</time>
        </li>
      </a>
      {{ end }}
    </ul>
  </aside>
</section>
<picture id="lightbox" class="close">
  <source type="image/webp" id="lightbox-webp">
  <img alt="lightbox" id="lightbox-jpeg">
</picture>
<script>
  let youtube = document.querySelectorAll(".youtube");
  for (let i = 0; i < youtube.length; ++i) {
    youtube[i].onclick = function () {
      let iframe = this.getAttribute("data-iframe");
      this.innerHTML = iframe;
    }
  }

  let img = document.querySelectorAll("main picture"),
      jpeg = document.getElementById("lightbox-jpeg"),
      webp = document.getElementById("lightbox-webp"),
      lightbox = document.getElementById("lightbox");

  for (let i = 0; i < img.length; ++i) {
    img[i].onclick = function () {
      let original = this.getAttribute("deta-original"),
          alt = this.getAttribute("deta-alt");
      webp.setAttribute("srcset", original + ".webp");
      jpeg.src = original + ".jpeg";
      jpeg.alt = alt;
      lightbox.classList.add('open');
      lightbox.classList.remove('close');
    }
  }
  lightbox.addEventListener('scroll', OpenClose);
  lightbox.onclick = OpenClose;
  function OpenClose() {
    lightbox.classList.add('close');
    lightbox.classList.remove('open');
  }
</script>
</main>
{{ end }}